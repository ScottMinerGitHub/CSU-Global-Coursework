NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

204  
205  LIBNAME CDATA 'C:\MEPS\SAS\DATA';
NOTE: Libref CDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\MEPS\SAS\DATA
206  *LIBNAME CDATA "\\programs.ahrq.local\programs\meps\AHRQ4_CY2\B_CFACT\BJ001DVK\Workshop_2017\SAS\Data";
207  
208  %LET YR=15;
209  
210  TITLE1 '2018 AHRQ MEPS DATA USERS WORKSHOP';
211  TITLE2 "EXERCISE7.SAS: HOW TO CONSTRUCT INSURANCE STATUS VARIABLES, USING FY &YR DATA";
212  
213  PROC FORMAT;
214  VALUE RACETHX
215    1 = '1 HISPANIC'
216    2 = '2 WHITE'
217    3 = '3 BLACK'
218    4 = '4 ASIAN'
219    5 = '5 OTHER RACE'
220    ;
NOTE: Format RACETHX is already on the library WORK.FORMATS.
NOTE: Format RACETHX has been output.
221  RUN;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

222  
223  
224  /*1) COUNT # OF MONTHS WITH INSURANCE*/
225  
226  DATA FY1;
227    SET CDATA.H181;
228  
229  ARRAY PEG (12) PEGJA&YR PEGFE&YR PEGMA&YR PEGAP&YR PEGMY&YR PEGJU&YR PEGJL&YR PEGAU&YR PEGSE&YR PEGOC&YR PEGNO&YR PEGDE&YR;
230  ARRAY POU (12) POUJA&YR POUFE&YR POUMA&YR POUAP&YR POUMY&YR POUJU&YR POUJL&YR POUAU&YR POUSE&YR POUOC&YR POUNO&YR POUDE&YR;
231  ARRAY PDK (12) PDKJA&YR PDKFE&YR PDKMA&YR PDKAP&YR PDKMY&YR PDKJU&YR PDKJL&YR PDKAU&YR PDKSE&YR PDKOC&YR PDKNO&YR PDKDE&YR;
232  ARRAY PNG (12) PNGJA&YR PNGFE&YR PNGMA&YR PNGAP&YR PNGMY&YR PNGJU&YR PNGJL&YR PNGAU&YR PNGSE&YR PNGOC&YR PNGNO&YR PNGDE&YR;
233  ARRAY POG (12) POGJA&YR POGFE&YR POGMA&YR POGAP&YR POGMY&YR POGJU&YR POGJL&YR POGAU&YR POGSE&YR POGOC&YR POGNO&YR POGDE&YR;
234  ARRAY PRS (12) PRSJA&YR PRSFE&YR PRSMA&YR PRSAP&YR PRSMY&YR PRSJU&YR PRSJL&YR PRSAU&YR PRSSE&YR PRSOC&YR PRSNO&YR PRSDE&YR;
235  ARRAY PRX (12) PRXJA&YR PRXFE&YR PRXMA&YR PRXAP&YR PRXMY&YR PRXJU&YR PRXJL&YR PRXAU&YR PRXSE&YR PRXOC&YR PRXNO&YR PRXDE&YR;
236  
237  ARRAY PRI (12) PRIJA&YR PRIFE&YR PRIMA&YR PRIAP&YR PRIMY&YR PRIJU&YR PRIJL&YR PRIAU&YR PRISE&YR PRIOC&YR PRINO&YR PRIDE&YR;
238  ARRAY INS (12) INSJA&YR.X INSFE&YR.X INSMA&YR.X INSAP&YR.X INSMY&YR.X INSJU&YR.X INSJL&YR.X INSAU&YR.X INSSE&YR.X INSOC&YR.X INSNO&YR.X INSDE&YR.X;
239  ARRAY MCD (12) MCDJA&YR.X MCDFE&YR.X MCDMA&YR.X MCDAP&YR.X MCDMY&YR.X MCDJU&YR.X MCDJL&YR.X MCDAU&YR.X MCDSE&YR.X MCDOC&YR.X MCDNO&YR.X MCDDE&YR.X;
240  ARRAY MCR (12) MCRJA&YR.X MCRFE&YR.X MCRMA&YR.X MCRAP&YR.X MCRMY&YR.X MCRJU&YR.X MCRJL&YR.X MCRAU&YR.X MCRSE&YR.X MCROC&YR.X MCRNO&YR.X MCRDE&YR.X;
241  ARRAY TRI (12) TRIJA&YR.X TRIFE&YR.X TRIMA&YR.X TRIAP&YR.X TRIMY&YR.X TRIJU&YR.X TRIJL&YR.X TRIAU&YR.X TRISE&YR.X TRIOC&YR.X TRINO&YR.X TRIDE&YR.X;
242  
243  ARRAY OPA (12) OPAJA&YR OPAFE&YR OPAMA&YR OPAAP&YR OPAMY&YR OPAJU&YR OPAJL&YR OPAAU&YR OPASE&YR OPAOC&YR OPANO&YR OPADE&YR;
244  ARRAY OPB (12) OPBJA&YR OPBFE&YR OPBMA&YR OPBAP&YR OPBMY&YR OPBJU&YR OPBJL&YR OPBAU&YR OPBSE&YR OPBOC&YR OPBNO&YR OPBDE&YR;
245  
246    PRI_N=0;
247    INS_N=0;
248    UNINS_N=0;
249    MCD_N=0;
250    MCR_N=0;
251    TRI_N=0;
252    OPAB_N=0;
253    GRP_N=0;
254    NG_N=0;
255    PUB_N=0;
256    REF_N=0;
257  
258    DO I=1 TO 12;
259      IF PRI(I)=1 THEN PRI_N+1;
260      IF INS(I)=1 THEN INS_N+1;
261      IF INS(I)=2 THEN UNINS_N+1;
262      IF MCD(I)=1 THEN MCD_N+1;
263      IF MCR(I)=1 THEN MCR_N+1;
264      IF TRI(I)=1 THEN TRI_N+1;
265      IF OPA(I)=1 OR OPB(I)=1 THEN OPAB_N+1;
266      IF PEG(I)=1 OR TRI(I)=1 OR POU(I)=1 OR PDK(I)=1 THEN GRP_N + 1;
267      IF PRX(I)=1 OR PNG(I)=1 OR POG(I)=1 OR PRS(I)=1 THEN NG_N + 1;
268      IF MCR(I)=1 OR MCD(I)=1 OR OPA(I)=1 OR OPB(I)=1 THEN PUB_N + 1;
269      IF INS(I)>0 THEN REF_N+1;
270    END;
271    DROP I;
272  
273  LABEL
274    PRI_N  ="# OF MONTHS COV BY PRIVATE INSU"
275    INS_N  ="# OF MONTHS COV BY ANY INSU"
276    UNINS_N="# OF MONTHS WITHOUT INSU"
277    MCD_N  ="# OF MONTHS COV BY MEDICAID"
278    MCR_N  ="# OF MONTHS COV BY MEDICARE"
279    TRI_N  ="# OF MONTHS COV BY TRICARE"
280    OPAB_N ="# OF MONTHS COV BY OTHER PUBLIC A OR B INSU"
281    GRP_N  ="# OF MONTHS COV BY PRIVATE GROUP INSU"
282    NG_N   ="# OF MONTHS COV BY PRIVATE NON-GROUP INSU"
283    PUB_N  ="# OF MONTHS COV BY PUBLIC INSU"
284    REF_N  ="# OF MONTHS IN MEPS SURVEY" ;
285  RUN;

NOTE: There were 35427 observations read from the data set CDATA.H181.
NOTE: The data set WORK.FY1 has 35427 observations and 1842 variables.
NOTE: DATA statement used (Total process time):
      real time           1.09 seconds
      cpu time            1.06 seconds
      

286  
287  TITLE3 "CREATE COUNT VARIABLES FOR # OF MONTHS WITH INSURANCE";
288  PROC FREQ DATA=FY1;
289    TABLES  PRI_N INS_N UNINS_N MCD_N MCR_N TRI_N OPAB_N GRP_N NG_N PUB_N REF_N /LIST MISSING;
290  RUN;

NOTE: There were 35427 observations read from the data set WORK.FY1.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.14 seconds
      cpu time            0.14 seconds
      

291  
292  TITLE3 'SAMPLE DUMP TO CHECK THE COUNT VARIABLES (USING PRI_N AS EXMAPLE)';
293  PROC PRINT DATA=FY1 (OBS=30) NOOBS;
294  VAR DUPERSID PRIJA&YR PRIFE&YR PRIMA&YR PRIAP&YR PRIMY&YR PRIJU&YR PRIJL&YR PRIAU&YR PRISE&YR PRIOC&YR PRINO&YR PRIDE&YR PRI_N;
295  RUN;

NOTE: There were 30 observations read from the data set WORK.FY1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

296  
297  /*2) CREATE FLAGS FOR VARIOUS TYPES OF INSU*/
298  
299  DATA FY2;
300    SET FY1;
301    LABEL
302    FULL_INSU='INSURED FOR FULL YEAR'
303    GROUP_INS1='EVER INSURED BY PRIVATE GROUP'
304    GROUP_INS2='INSURED BY PRIVATE GROUP FOR FULL YEAR'
305    NG_INS='EVER INSURED BY PRIVATE NON-GROUP';
306  
307    FULL_INSU=0;
308    GROUP_INS1=0;
309    GROUP_INS2=0;
310    NG_INS=0;
311  
312    IF UNINS_N=0 THEN FULL_INSU=1;
313    IF GRP_N>0 THEN GROUP_INS1=1;
314    IF GRP_N>0 AND GRP_N=REF_N THEN GROUP_INS2=1;
315    IF NG_N>0 THEN NG_INS=1;
316  RUN;

NOTE: There were 35427 observations read from the data set WORK.FY1.
NOTE: The data set WORK.FY2 has 35427 observations and 1846 variables.
NOTE: DATA statement used (Total process time):
      real time           0.51 seconds
      cpu time            0.50 seconds
      

317  
318  TITLE3 "SUPPORTING CROSSTABS TO VERIFY THE CREATION OF THE FLAGS";
319  PROC FREQ DATA=FY2;
320    TABLES FULL_INSU FULL_INSU*UNINS_N FULL_INSU*INS_N*REF_N
321           GROUP_INS1 GROUP_INS1*GRP_N
322           GROUP_INS2 GROUP_INS2*GRP_N*REF_N
323           NG_INS NG_INS*NG_N/LIST MISSING;
324  RUN;

NOTE: There were 35427 observations read from the data set WORK.FY2.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.20 seconds
      cpu time            0.20 seconds
      

325  
326  
327  /*3) CALCULATE % OF PERSONS COVERED BY INSU*/
328  ODS GRAPHICS OFF;
329  TITLE3 "% AND POPULATION WITH INSU";
330  PROC SURVEYMEANS DATA=FY2 NOBS SUMWGT SUM STD MEAN STDERR;
331      STRATA  VARSTR;
332      CLUSTER VARPSU;
333      WEIGHT PERWT15F;
334      VAR  FULL_INSU GROUP_INS1 GROUP_INS2 NG_INS;
335      DOMAIN RACETHX;
336    FORMAT RACETHX RACETHX.;
337  RUN;

NOTE: Due to nonpositive weights, 1534 observation(s) were deleted.
NOTE: Only one cluster in a stratum for RACE/ETHNICITY (EDITED/IMPUTED) domains for variable(s) FULL_INSU, GROUP_INS1, GROUP_INS2, NG_INS. The estimate of 
      variance for FULL_INSU, GROUP_INS1, GROUP_INS2, NG_INS will omit this stratum.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.28 seconds
      cpu time            0.26 seconds
      

338  
339  PROC PRINTTO;
340  RUN;

